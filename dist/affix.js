/*!
 * SeaUI: affix.js v1.0.0
 * Copyright 2013-2014 chanh
 * Licensed under MIT(https://github.com/seaui/affix/blob/master/LICENSE)
 */
define("seaui/affix/1.0.0/affix",["jquery/jquery/1.10.1/jquery"],function(a){var b=a("jquery/jquery/1.10.1/jquery"),c=function(a,d){this.options=b.extend({},c.DEFAULTS,d),this.$window=b(window).on("scroll.bs.affix.data-api",b.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",b.proxy(this.checkPositionWithEventLoop,this)),this.$element=b(a),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};c.RESET="affix affix-top affix-bottom",c.DEFAULTS={offset:0},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass("affix");var a=this.$window.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a},c.prototype.checkPositionWithEventLoop=function(){setTimeout(b.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var a=b(document).height(),d=this.$window.scrollTop(),e=this.$element.offset(),f=this.options.offset,g=f.top,h=f.bottom;"top"==this.affixed&&(e.top+=d),"object"!=typeof f&&(h=g=f),"function"==typeof g&&(g=f.top(this.$element)),"function"==typeof h&&(h=f.bottom(this.$element));var i=null!=this.unpin&&d+this.unpin<=e.top?!1:null!=h&&e.top+this.$element.height()>=a-h?"bottom":null!=g&&g>=d?"top":!1;if(this.affixed!==i){this.unpin&&this.$element.css("top","");var j="affix"+(i?"-"+i:""),k=b.Event(j+".bs.affix");this.$element.trigger(k),k.isDefaultPrevented()||(this.affixed=i,this.unpin="bottom"==i?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(j).trigger(b.Event(j.replace("affix","affixed"))),"bottom"==i&&this.$element.offset({top:a-h-this.$element.height()}))}}};var d=b.fn.affix;b.fn.affix=function(a){return this.each(function(){var d=b(this),e=d.data("bs.affix"),f="object"==typeof a&&a;e||d.data("bs.affix",e=new c(this,f)),"string"==typeof a&&e[a]()})},b.fn.affix.Constructor=c,b.fn.affix.noConflict=function(){return b.fn.affix=d,this},b(window).on("load",function(){b('[data-spy="affix"]').each(function(){var a=b(this),c=a.data();c.offset=c.offset||{},c.offsetBottom&&(c.offset.bottom=c.offsetBottom),c.offsetTop&&(c.offset.top=c.offsetTop),a.affix(c)})})});
